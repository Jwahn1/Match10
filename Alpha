#include <stdio.h>

int main()
{

srand(time(NULL));
int tablerodeljuego[3][5];
int tablerofalso[3][5];
int i;
int j;
int k;
int cordx = 0; //para el usario 
int cordy = 0;
int cordx2 = 0;
int cordy2 = 0;
int match = 0;
int repeat = 1;
int counter =0;
int playertoken=1; //decide que jugador le toca elegir


//-----------------------------------------------------------------------------------------------------


for(int i=0 ; i<3 ; i++)
{
    for(int j = 0 ; j<5 ; j++)
     {
         tablerodeljuego[i][j]=rand() % 9+1 ;
     }
} 

int matchcounter = 0; // esto debe contar cuantos matches hay en el array, este debe ser calculado en el principio del programa
int repeticiones = 0;
for (k=1 ; k<10 ; k++)
{    
    repeticiones = 0;
    printf("\n");
     for (i = 0 ; i<3 ; i++) 
     {
         for (j = 0 ; j<5 ; j++)
         {
             if (k == tablerodeljuego[i][j])
             {
                 repeticiones = repeticiones+1;
                 printf("%d se repite %d vez \t",k,repeticiones);
                 if (repeticiones % 2 == 0)
                 {
                     matchcounter= matchcounter+1;
                 }
             }
         }
     }
}

//------------------------------------------------------------------------------------------------------

printf("\t*****Match10!!!*****"); 

for(int i=0 ; i<3 ; i++)
{
    for(int j = 0 ; j<5 ; j++)
     {
         tablerofalso[i][j]= 0;
     }
} 


for (i = 0 ; i<3 ; i++) //imprime el tablero con casillas vacias que representa las cartas de boca abajo
  {
     printf("\n");
     
     for (j = 0 ; j<5 ; j++)
     {
         printf("%d \t", tablerofalso[i][j]);
     }  
  }


printf("\n");

//respuesta del tablero
printf("Cheatmode \n");
for (i = 0 ; i<3 ; i++) 
{
     printf("\n");
     
     for (j = 0 ; j<5 ; j++)
     {
         printf("%d  \t", tablerodeljuego[i][j]);
     }  
}
//--------------------------------------------------------------------------------------------------------------------------
while (match != 1)
{
          if (playertoken == 1)
          {
             printf("\n\nJUGADOR 1 \n");
         }   
         else
         {
             printf("\n\nJUGADOR 2 \n");
         }   
       
        printf("\n");  //pregunta al usuario su primera carta para voltear
        printf("eliga su primero casilla\n");
        printf("cuantas lineas abajo \n");
        scanf("%d",&cordy);
        printf("cuantas lineas a la derecha \n");
        scanf("%d",&cordx);
        
        tablerofalso[cordy][cordx] = tablerodeljuego[cordy][cordx]; //transfiere el numero del tablero respuesta a que se muestre en el juego en el tablero verdadero
        
        
        for (i = 0 ; i<3 ; i++) //imprime el tablero con las cords elejidas
          {
             printf("\n");
             
             for (j = 0 ; j<5 ; j++)
             {
                 printf("%d \t", tablerofalso[i][j]);
             }  
          }
        
        printf("\n");  //pregunta la segunda carta a voltear
        printf("eliga su segunda casilla\n");
        printf("cuantas lineas abajo \n");
        scanf("%d",&cordy2);
        printf("cuantas lineas a la derecha \n");
        scanf("%d",&cordx2);
        
        while (cordx2 == cordx && cordy2 == cordy) //loop solo para evitar que causen un error
        {
            
        printf("no puede elegir la misma casilla dos veces \n");
        printf("\n");
        printf("eliga su segunda casilla\n");
        printf("cuantas lineas abajo \n");
        scanf("%d",&cordy2);
        printf("cuantas lineas a la derecha \n");
        scanf("%d",&cordx2);
        
        }
        
        tablerofalso[cordy2][cordx2] = tablerodeljuego[cordy2][cordx2]; //si no causa error pasara aqui saltandose al while loop
        
        for (i = 0 ; i<3 ; i++) //imprime el tablero boca abajo con las cords elejidas
         {
             printf("\n");
             for (j = 0 ; j<5 ; j++)
             {
                 printf("%d \t", tablerofalso[i][j]);
             }  
         }   
      
        if (tablerodeljuego[cordy][cordx] == tablerodeljuego[cordy2][cordx2])
         {
             printf("\nencontro un match \n");
             match = 1;
             counter=counter+1;
         }
        
        if (tablerodeljuego[cordy][cordx] + tablerodeljuego[cordy2][cordx2] ==10)
         {
             printf("encontro un match 10! \n");
         }
        if(match == 0) //si no fue un match limpiara las casillas elegidas
        {
             printf("\nNo Match \n"); 
             for(int i=0 ; i<3 ; i++)
             {
                    for(int j = 0 ; j<5 ; j++)
                     {
                         tablerofalso[i][j]= 0;
                     }
             } 
             printf("\n \n");
              if (playertoken == 1)  //cambia de jugadora dependiendo de quien esta en turno
             {
                 playertoken=0;
             }   
               else 
             {
                 playertoken=1;
             }   
             
             for (i = 0 ; i<3 ; i++) //imprime el tablero con casillas vacias que representa las cartas de boca abajo
             {
                 printf("\n");
                    
                    for (j = 0 ; j<5 ; j++)
                    {
                         printf("%d \t", tablerofalso[i][j]);
                    }  
             }             
              
        }
        
}       

///SECOND LOOP -----------------------------------------------------------------------------------------------
while ( counter<matchcounter)
{
     printf("\n");
     match = 0;
     repeat=1;
     
     cordx=0;
     cordy=0;
     cordx2=0;
     cordy2=0;
     printf("%d \n",counter);
     while (match != 1)
     {  
         
         if (playertoken == 1)
        {
             printf("\n\nJUGADOR 1 \n");
        }   
         else
        {
             printf("\n\nJUGADOR 2 \n");
        }
         
         for (i = 0 ; i<3 ; i++) //imprime el tablero con casillas vacias que representa las cartas de boca abajo
                 {
                     printf("\n");
                        
                        for (j = 0 ; j<5 ; j++)
                        {
                             printf("%d \t", tablerofalso[i][j]);
                        }  
                 } 
         
            repeat=1;
            while (repeat == 1)
            {
                
                 printf("\n");  //pregunta al usuario su primera carta para voltear
                 printf("eliga su primera casilla\n");
                 printf("cuantas lineas abajo \n");
                 scanf("%d",&cordy);
                 printf("cuantas lineas a la derecha \n");
                 scanf("%d",&cordx);
                    
                 if (tablerofalso[cordy][cordx]!=0) //checkea si se repite la carta volteada
                 {
                    printf("esta casilla ya esta descuvierta \n");
                 }
                 if (tablerofalso[cordy][cordx]==0)
                 {
                     repeat = 0;
                 }
                 
            }   
            tablerofalso[cordy][cordx] = tablerodeljuego[cordy][cordx]; //transfiere el numero del tablero respuesta a que se muestre en el juego en el tablero verdadero
            repeat = 1;
            
            for (i = 0 ; i<3 ; i++) 
             {
                 printf("\n");
                 
                 for (j = 0 ; j<5 ; j++)
                 {
                     printf("%d \t", tablerofalso[i][j]);
                 }  
             }
              
             while (repeat == 1)
             {
             printf("\n");  //pregunta la segunda carta a voltear
             printf("eliga su segunda casilla\n");
             printf("cuantas lineas abajo \n");
             scanf("%d",&cordy2);
             printf("cuantas lineas a la derecha \n");
             scanf("%d",&cordx2);
              
                 if (tablerofalso[cordy2][cordx2]!=0)  //checkea si repite la carda volteada 
                 {
                    printf("esta casilla ya esta descuvierta \n");
                 }
                 if (tablerofalso[cordy2][cordx2]==0)
                 {
                     repeat = 0;
                 }
                 
             }
            
            
            while (cordx2 == cordx && cordy2 == cordy) //loop solo para evitar que causen un error
            {
                
             printf("no puede elegir la misma casilla dos veces \n");
             printf("\n");
             printf("eliga su segunda casilla\n");
             printf("cuantas lineas abajo \n");
             scanf("%d",&cordy2);
             printf("cuantas lineas a la derecha \n");
             scanf("%d",&cordx2);
            
            }
            
            tablerofalso[cordy2][cordx2] = tablerodeljuego[cordy2][cordx2]; //si no causa error pasara aqui saltandose al while loop
            
            for (i = 0 ; i<3 ; i++) 
            {
                 printf("\n");
                 for (j = 0 ; j<5 ; j++)
                 {
                     printf("%d \t", tablerofalso[i][j]);
                 }  
            }  
            
            if (tablerodeljuego[cordy][cordx] == tablerodeljuego[cordy2][cordx2])
            {
                 printf("\nencontro un match \n");
                 match = 1;
                 counter = counter + 1;
            }
            
            if(match == 0) //si no fue un match limpiara las casillas elegidas
            {
                 if (playertoken == 1)  //cambia de jugadora dependiendo de quien esta en turno
                 {
                     playertoken=0;
                 }   
                 else 
                 {
                     playertoken=1;
                 }   
                 
                 tablerofalso[cordy][cordx]=0;
                 printf("\nNo Match \n"); 
                 tablerofalso[cordy][cordx]=0;
                 tablerofalso[cordy2][cordx2]=0;
                 
            }
            
     }       
}
printf("todos las parejas de tarjetas fueron encontradas");
    
    return 0;
}
